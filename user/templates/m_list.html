{% extends 'base.html' %}

{% block attachment %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/user.css' %}?ver=1">
    <script src="{% static 'js/user.js' %}"></script>
{% endblock %}

{% block contents %}

<div class="title"> 
    <h3>매거진</h3>
</div>


<div class="row">
  <div class="col-12">
    {% if session.admin %}
    <button type="button" class="btn btn-outline-dark float-end" onclick="chkDelete()" display="none">삭제</button>
    <a class="btn btn-outline-dark float-end" href="{% url 'User:magazine_write' %}" role="button" display="none">작성</a>
    <a class="btn btn-outline-dark float-end " href="{% url 'User:magazine_update' %}" role="button" display="none">수정</a> 
    {% endif %}
  </div>
</div>

<div class="col-lg-6">
    {% for magazine in magazine %}
    <div class="card col-xs-8 col-sm-6">
      <div class="admin_show">
        {% if session.admin %}
          <input class="form-check-input" type="checkbox" id="flexCheckDefault"display: "none";>
        {% endif %}
      </div>
        <a href="{% url 'User:magazine_detail' magazine.id %} "><img class="card-img-top" src="https://dummyimage.com/700x350/dee2e6/6c757d.jpg" alt="..." /></a>
        <a href="{% url 'User:magazine_detail' magazine.id %}" style="text-decoration:none">
        <h5 class="card-title">제목 {{ magazine.title }}</h5>
        <p class="card-text">내용 {{ magazine.content }}</p>
        </a>
        <div class="small text-muted">등록일 {{ magazine.reg_date|date:"Y-m-d" }}</div>
    </div>
    <br>
    {% endfor %}
</div>



<div class="row mt-2">
  <div class="col-12">
      <nav>
          <ul class="pagination justify-content-center">
              {% if notices.has_previous %}
              <li class="page-item">
                  <a class="page-link" href="?p={{magazine.previous_page_number}}">이전으로</a>
              </li>
              {% else %}
              <li class="page-item disabled">
                  <a class="page-link disabled" href="#">이전으로</a>
              </li>
              {% endif %}
              <li class="page-item active">
                  <a class="page-link" href="#">{{magazine.number}} / {{magazine.paginator.num_pages }}</a>
              </li>
              {% if notices.has_next %}
              <li class="page-item">
                  <a class="page-link" href="?p={{magazine.next_page_number}}">다음으로</a>
              </li>
              {% else %}
              <li class="page-item disabled">
                  <a class="page-link disabled" href="#">다음으로</a>
              </li>
              {% endif %}
          </ul>
      </nav>
  </div>
</div>



<script>
    function chkDelete(){
        // 삭제 여부 확인
      if (confirm("삭제하시겠습니까?") == true){
          document.form.submit();
      }else{      
          return;
      }
    }
</script>

<br>
<br>

{% endblock %}